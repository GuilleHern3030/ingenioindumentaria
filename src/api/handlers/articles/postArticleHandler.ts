import request from '../../controllers/articles/postArticleController.ts'
import Article from '../../objects/Article.ts'
import handleError from '../errorHandler.ts'
import { isAdminSignedIn } from '../../index.ts'

export const postArticle = async(article:Article):Promise<any> => new Promise(async(resolve, reject) => {

    if (isAdminSignedIn() === true) try {

        // Parsear el Article a JSON
        const jsonArticle = article.json()

        // Solicitar la petici贸n al Backend
        const response = await request(jsonArticle)

        // Devuelve la respuesta del Backend
        console.log("Creating", article, "\nResponse:", response)
        resolve(response) // true


    } catch(err:any) { reject(handleError(err)) }
    else reject("La sesi贸n caduc贸. Vuelve a iniciar sesi贸n para continuar.")
})

export default postArticle